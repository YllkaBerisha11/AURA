<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="products.css">
    <title>Your Cart</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>
    <nav>
        <label class="logo">AURA</label>
        <ul>
            <li><a href="home.html">Home</a></li>
            <li><a href="aboutUs.html">About Us</a></li>
            <li><a href="products.html">Products</a></li>
            <li><a href="sales.html">Sales</a></li>
            <li><a href="contactUs.html">Contact Us</a></li>
            <li><a href="login.html"><i class="fa fa-user-plus"></i></a></li>
            <li><a href="cart.html" id="cart-icon"><i class="fa fa-shopping-cart"></i> <span id="cart-count">0</span></a></li>
            <li><a href="favorites.html" id="favorites-icon"><i class="fa fa-heart"></i> <span id="favorites-count">0</span></a></li>
        </ul>
    </nav>

    <div class="container">
        <h1>Your Cart</h1>
        <div id="cart-items" class="product-grid">
            <!-- Produkter do të shtohen këtu nga JavaScript -->
        </div>
        <button id="checkout" class="checkout-button">Proceed to Checkout</button>
    </div>

    <script>
        // Funksioni për të shfaqur produktet e shtuara në cart
        function displayCart() {
            let cart = JSON.parse(localStorage.getItem("cart")) || [];
            const cartItemsContainer = document.getElementById("cart-items");

            // Përshtatja dinamike e përmbajtjes së cart
            cartItemsContainer.innerHTML = ''; // Pastroj përmbajtjen ekzistuese
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = `<p>Your cart is empty</p>`;
            } else {
                cart.forEach(product => {
                    const productBox = document.createElement('div');
                    productBox.classList.add('product-box');
                    productBox.innerHTML = `
                        <img src="${product.image}" alt="${product.name}" class="product-image">
                        <div class="product-info">
                            <h3 class="product-title">${product.name}</h3>
                            <p class="product-price">${product.price}</p>
                        </div>
                        <button class="remove-from-cart">Remove</button>
                    `;
                    cartItemsContainer.appendChild(productBox);
                });
            }
        }

        // Funksioni për të hequr një produkt nga cart
        function removeFromCart(productToRemove) {
            let cart = JSON.parse(localStorage.getItem("cart")) || [];
            cart = cart.filter(product => product.name !== productToRemove.name); // Filtron produktin
            localStorage.setItem("cart", JSON.stringify(cart));
            displayCart(); // Përshtat shfaqjen pas heqjes
            updateCartCount(); // Përditësojmë numrin në navbar
        }

        // Përditësojmë numrin në navbar për cart
        function updateCartCount() {
            let cart = JSON.parse(localStorage.getItem("cart")) || [];
            document.getElementById('cart-count').textContent = cart.length;
        }

        window.onload = function() {
            displayCart(); // Shfaqim produktet kur ngarkohet faqja
            updateCartCount(); // Përditësojmë numrin e produkteve në navbar
        };

        // Eventet për butonat "Remove"
        document.getElementById('cart-items').addEventListener('click', function(e) {
            if (e.target.classList.contains('remove-from-cart')) {
                const productElement = e.target.closest('.product-box');
                const productName = productElement.querySelector('.product-title').textContent;
                const productPrice = productElement.querySelector('.product-price').textContent;
                const productImage = productElement.querySelector('.product-image').src;

                const product = {
                    name: productName,
                    price: productPrice,
                    image: productImage
                };

                removeFromCart(product); // Heqim produktin nga cart
            }
        });
    </script>

</body>
</html>
